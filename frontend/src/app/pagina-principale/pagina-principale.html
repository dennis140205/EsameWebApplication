<div class="row g-4 mt-2">

  <div class="col-md-6">
    <div class="card-widget">
      <div class="widget-header">
        <h3>ğŸ† CLASSIFICA LEGA</h3>
      </div>
      <div class="table-responsive">
        <table class="custom-table">
          <thead>
          <tr>
            <th>Pos</th>
            <th>Squadra</th>
            <th class="text-center">Pt</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let team of classifica; let i = index">
            <td class="rank-col">{{ i + 1 }}Â°</td>
            <td class="team-col">{{ team.nomeFantasquadra }}</td>
            <td class="points-col text-center"><strong>{{ team.punteggioClassificaFantasquadra }}</strong></td>
          </tr>
          </tbody>
        </table>
        <div *ngIf="classifica.length === 0" class="p-3 text-center text-muted">
          Nessuna squadra iscritta.
        </div>
      </div>
    </div>
  </div>

  <div class="col-md-6">
    <div class="card-widget">
      <div class="widget-header d-flex justify-content-between align-items-center">
        <button class="btn-nav" (click)="cambiaGiornata(-1)" [disabled]="giornataVisualizzata <= 1">
          <i class="bi bi-chevron-left"></i>
        </button>
        <div class="giornata-nav-container">
          <span class="emoji">ğŸ“…</span>
          <span class="label">Giornata</span>
          <input type="number"
                 class="input-giornata"
                 [(ngModel)]="inputGiornata"
                 (change)="vaiAGiornata()"
                 (keyup.enter)="vaiAGiornata()"
                 min="1" max="38">
        </div>
        <button class="btn-nav" (click)="cambiaGiornata(1)" [disabled]="giornataVisualizzata >= 38">
          <i class="bi bi-chevron-right"></i>
        </button>
      </div>

      <div class="table-responsive">
        <table class="custom-table calendar-table" *ngIf="prossimaGiornata.length > 0">
          <tbody>
          <tr *ngFor="let match of prossimaGiornata">
            <td class="home-team text-end">{{ getNomeSquadra(match.idSquadraCasa) }}</td>

            <td class="vs-badge text-center">
              <span *ngIf="match.giocata" class="score-display">
                {{ match.golCasa }} - {{ match.golTrasferta }}
              </span>

              <span *ngIf="!match.giocata">VS</span>
            </td>

            <td class="away-team text-start">{{ getNomeSquadra(match.idSquadraTrasferta) }}</td>
          </tr>
          </tbody>
        </table>

        <div *ngIf="isAdmin && prossimaGiornata.length > 0" class="calcolo-container mt-3">
          <button
            class="btn-calcola"
            [disabled]="!isCalcoloAbilitato"
            [class.btn-disabled]="!isCalcoloAbilitato"
            (click)="eseguiCalcolo()">
            <span *ngIf="!isLoading">
            <i class="bi" [ngClass]="giornataVisualizzata < (giornataCorrente - giornataInizialeLega + 1) ? 'bi-arrow-counterclockwise' : 'bi-calculator'"></i>
            {{ testoBottoneCalcolo }}
              </span>
          </button>
        </div>

        <div *ngIf="prossimaGiornata.length === 0" class="empty-state-calendar">
          <p>Il calendario non Ã¨ ancora stato generato.</p>
          <button *ngIf="isAdmin" class="btn-action btn-lime" (click)="generaCalendario()" [disabled]="isLoading">
            ğŸ“… {{ isLoading ? 'Creazione...' : 'Genera Calendario' }}
          </button>

          <p *ngIf="!isAdmin" class="small">In attesa che l'admin crei il calendario...</p>
        </div>
      </div>
    </div>
  </div>
</div>


